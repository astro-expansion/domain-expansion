---
title: Domain Expansion
description: And they said incremental builds in Astro weren't possible.
---

import { Tabs, TabItem, Badge } from '@astrojs/starlight/components';

Domain Expansion is an Astro integration that adds support for incremental builds. Basically,
builds go weee now.

## Benchmarks

<Badge text="TODO: PUT GRAFANA BENCHMARKS HERE" />

1. Astro Docs, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)
2. Starlight docs, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)
3. astro.build, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)
4. Astrowind basic install, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)
5. Cloudflare docs, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)
6. StudioCMS/UI Docs, time to build (domain expansion (cold build) vs domain expansion (hot build) vs default)

## Installation

The Domain Expansion integration can be installed from npm using the following command:

<Tabs>
	<TabItem label="npm">
		```bash
		npx astro add @domain-expansion/astro
		```
	</TabItem>
	<TabItem label="pnpm">
		```bash
		pnpm astro add @domain-expansion/astro
		```
	</TabItem>
	<TabItem label="yarn">
		```bash
		yarn astro add @domain-expansion/astro
		```
	</TabItem>
</Tabs>

This will install the integration and add it to your `astro.config.mjs`.

### Manual Installation

Install the `@domain-expansion/astro` package using your package manager of choice:

<Tabs>
	<TabItem label="npm">
		```bash
		npm i @domain-expansion/astro
		```
	</TabItem>
	<TabItem label="pnpm">
		```bash
		pnpm add @domain-expansion/astro
		```
	</TabItem>
	<TabItem label="yarn">
		```bash
		yarn add @domain-expansion/astro
		```
	</TabItem>
</Tabs>

Import and use the integration in your `astro.config.mjs`:

```js
import { defineConfig } from 'astro/config';
import domainExpansion from "@domain-expansion/astro";

export default defineConfig({
	integrations: [
		domainExpansion(),
	],
});
```

## Usage

Once the integration has been included in your `astro.config.mjs`, the next time you build your site,
your build will be cached. From that point on, whenever you rebuild your site, only the files that have
changed will be rebuilt.

### Even more optimization

Pray that [Rolldown](https://rolldown.rs/) gets released soon. It's current version, Rollup,
accounts for about 90% of the build time for subsequent builds.

## Authors

- [Luiz Ferraz](https://github.com/Fryuni)
- [Louis Escher](https://github.com/louisescher)
- [Reuben Tier](https://github.com/theotterlord)
